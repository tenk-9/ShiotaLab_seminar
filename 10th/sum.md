# やってきた内容のまとめ

- 1st
  - 小野先生のSTFT論部を読んで，STFTについて学んだ．
- 2nd
  - 論文を読んだ
    - 各人が担当したセクション名を紹介する
  - 自分の音声をSTFTして，パラメータを変えて変化を見た
    - 窓長を変えて変化を確認した
      - 窓長+: 時間分解能-, 周波数分解能+
- 3rd
  - 録音のHzを変えた 44100 -> 16k
  - 話者認識となりすまし対策についての論文を読んだ
  - スマホとパソコンそれぞれで音声を録音しスペクトログラムを確認した
  - 照合の評価方法についてしらべた
    - EER，DCF，ROC curve
- 4th
  - ECAPA-TDNNを用いた話者照合をおこなった
  - 自分で発話データを用意し，照合を行い，EER curveとROC curveを確認
- 5,6th
  - マスクの有無による
    - マスクあり，マスク無しの音声を用意した

- 7~
- 2班にわかれた
  - 
  - ノイズの種類と量がどのよに照合精度に影響するか
    - ホワイトノイズと確率密度ノイズ
  - 録音機器の違いがエラー率にどう影響するか
    - スマホの音声高周波(1500~5000Hz)くらいの周波数が多い(ノイズ)
    - →特定の周波数を，フィルタできってみて，エラー率の変化を確認


## 用意した音声
- ~6th
  - 
- 7th~
  - 

- STFTとはなにか，とそのパラメータについて学んだ
  - パラメータ(窓長)を変え，自分の音声のスペクトログラムの変化をみてみた


## 論文を読んだ(山口)
論文を読んだり，調べたりして学んだこと
### 話者認識の基礎知識
話者認識に関連する基礎的な知識として，短時間フーリエ変換と話者認識の評価指標について学んだ．
#### 短時間フーリエ変換(STFT)とは何か
短時間フーリエ変換(STFT: Short time Fourier transform)とは，離散時間信号の短い区間を切り出してフーリエ変換したもの．

窓関数を元の信号に掛け合わせることで短時間区間を切り出し，切り出した信号をフーリエ変換する．窓関数をオーバーラップさせつつ少しづつシフトし，信号全体の解析を行う．

信号の切り出しを行う窓関数には様々な種類がある．窓関数の種類やシフト量，フレーム長等により，周波数分解能や時間分解能が変化する．したがって，解析したい信号の性質に対して適切な窓関数やパラメータを選択する必要がある．

> 窓関数の種類とパラメータ
> 
> 実験で検証したように，FFTでは入力された信号の周期性を仮定している．したがって，周期性を仮定した際に急峻な変化が現れるような切り出し方をすると，本来信号には含まれない高周波のノイズが表れてしまう．そのため，主要な窓関数は両端が減衰するような概形をしている．しかし窓関数を元の信号に畳み込んでしまっているため，フーリエ変換結果に本来含まれない周波数成分が現れてしまう．
> 
> 窓関数には矩形窓，ハン窓，バートレット窓等，様々な窓関数がある．窓関数の種類によって，存在しない周波数成分の現れ方が異なる．また，窓関数のフレーム長やシフト量によっても周波数分解能や時間分解能等の性能が変化する．STFTを用いて解析したい信号の特性によって，適切な窓関数の種類やパラメータは異なる．

STFTを用いた例として，スペクトログラムが挙げられる．スペクトログラムはSTFTの結果のうち振幅成分を可視化したもので，信号に含まれる周波数成分の時間的変化を可視化することができる．
#### 話者認識の評価指標について
話者認識の評価指標について，EER, DCF, ROC curveについて学んだ．

正しく話者を認識できた否かを考えたとき，真陽性，真陰性，偽陽性，偽陰性の四通りが考えられる．これらはしばしば混同行列としてとして表される．

話者認識の評価はこれらの割合を用いて行う．簡単にはEERが低ければ性能が良いと評価できるため，実験の評価指標にはこれを用いる．
- EER
  - 等価エラー率．他人受け入れ率と本人拒否率が一致するように閾値を調整した際のエラー率．低ければそれだけ性能の良いモデルとされる．
    - 他人受け入れ率: False Acceptable Rate, FAR
      - 他人を本人であると判断してしまう
      - FP/(FP+TN)
    - 本人拒否率: False Rejection Rate, FRR
      - 本人を他人であると判断してしまう
      - FN/(TP+FN)
- DCF
  - Detection Cost Factor
  - *(ごめんなさいあんまり覚えていない，次の説明は合っていますか？)*
  - FARとFRRに重みを付けた際のEER．
    > 例えば，銀行等の認証システムでは他人受け入れ率の重みは本人拒否率より重くあるべき
  - システムの運用環境や要件をもとに重みを決める．低ければ低いほど性能が良いとされる．
  - https://www.jstage.jst.go.jp/article/isciesci/62/2/62_63/_pdf/-char/ja
  - https://ipsj.ixsq.nii.ac.jp/ej/?action=repository_action_common_download&item_id=67058&item_no=1&attribute_id=1&file_no=1
- ROC curve
  - 受信者操作特性，Reciever Operating Characteristic
  - 偽陽性率を横軸に，真陽性率を縦軸にとったグラフ，閾値を変化させた際の値をプロットする．左上張り付きが理想的な場合，ランダム推定は対角線．
    - 偽陽性率(False Positive Rate)
      - 誤りのデータを間違えて正しいと判断してしまう割合
      - FP/(FP+TN)
    - 真陽性率(True Positive Rate)
      - 正しいデータのうち，正しいと判断できた割合
      - TP/(TP+FN)

### 話者認識の研究の動向と最新手法
話者認識の研究動向と最新手法について論文を読んで学んだことを，

- 話者認識の国際動向
- 法科学分野における扱い
- ロバストネスの向上
- 話者認識で用いられる機械学習と最新手法

の切り口でまとめる．

#### 話者認識の国際動向
話者認識の主な主要国際会議は次の3つ．
- ICASSP
- INTERSPEECH
- Odyssey

これらの会議で発表された話者認識に関する論文数は100概ね100件以上で，近年は約150~200件と増加傾向にある．

また，話者認識技術の商用化例としての応用としても主な分野は，個人認証と分析である．
- 個人認証系
  - 電話の音声を用いた本人確認
  - 話者識別に基づく情報へのアクセス制御
- 分析系
  - 大量のデータを分析して人物に関する有用な情報を抽出する
  - 警察の科学捜査（音声鑑定）など
#### 法科学分野における扱い
個人を認証するための生体情報として，指紋やDNA型(身体的特徴)，筆跡や音声(行動的特徴)などがある．
> 音声は発声器官の特徴なども含むため，身体的特徴ももつ

音声は生体認証に用いる情報として十分普及しているとは言えないが，犯罪捜査の面では実際に利用されている．
ただし，鑑定の結果を法的判断に用いるためには，その鑑定の結果が信用に足るものでなければならない．

DNA鑑定や薬物同定等は科学的な原理や方法が確立しているのに対し，筆跡鑑定や音声鑑定は確かさの程度を科学的に示しているに過ぎず，必ずしもこれらの結果に証拠能力があるとは限らない．

> 声紋鑑定の結果の確実性についていまだ科学的に承認されたとまでは言えないから，これに証拠能力を認めることは慎重でなければならないが，他面陪審制を採らず，個別具体的な判断に親しむ我が国の精度の下では，各種器械の発達及び声紋識別技術の向上に伴い，検定件数も成績も上昇していることにかんがみれば，一概にその証拠能力を否定し去るのも相当でなく，その検査の実施者が必要な技術と経験を有する適格者であり，使用した器具の性能，作動も正確でその検定閣下は信頼性のあるものと認められるときは，その検査の経過及び結果についての忠実な報告にはその証明力の程度は別として，証拠能力を認めることを妨げない．
>
> いわゆる声紋鑑定とその証拠能力及び証明力, 判例時報, 960, 8-20
#### ロバストネスの向上
従来の話者照合では，発話内容，発話時期，発話環境などの影響によりスコアが大きく変動してしまい，一定の精度を得るための閾値設定が困難であった．話者認識システムはこれらの環境の変化に影響されにくい(ロバストな，頑健性の高い)ことが理想的である．

ロバストネス(頑健性)を向上させるために注目すべき事柄として，特徴量の選択，特徴空間とモデル，スコア正規化と時期差，音声の個人性が挙げられる．
- 特徴量
  - 代表的なものは振幅スペクトルのみ用いていた
  - 位相情報も含めることで，精度が向上した
  - 調波特徴，韻律特徴量など
- 特徴空間とモデル
  - 部分空間法
  - 混合ガウスモデル
  - Joint Factor Analysis
- スコア正規化
  - デバイス間の周波数特性の差異や発話時期の違いを吸収できるような正規化を行うことで，安定した他人誤受理率を得られる．
  - スコアの正規化には大量の音声データが必要になる点がデメリットである．
  - 登録音声の発話時期と認識時期に時期差があると認識精度が低下する．
- 時期差
  - モデル作成に用いた音声の録音時期と認識時期に時期差が生じると認識精度が低下する．
  - モデル作成時と異なる時期の発話でモデルのパラメータを更新したり，時期差の影響が少ない空間に特徴量を射影するアプローチがある．
- 音声の個人性
  - 人間が知人の声を識別できるように，声には話者に関する情報（個人性）が含まれている．これらに注目すると認識性能を向上させることができると考えられる．
  - 分節音(母音のフォルマント，鼻濁音等)，超分節音(下の長さ，歯並び，発話速度，アクセント等)
#### 話者認識で用いる機械学習と最新手法
話者認識の領域で用いられる機械学習手法は，生成モデル，識別モデル，因子分析モデルに大別され，この順に手法が変化していった．
- 生成モデル

  各話者の特徴量は話者を表す確率分布から生成されるという仮定に基づいたモデル．混合ガウス分布が代表的なモデル．一般的な音声特徴を生成するモデル(Universal Background Model)を用いて混合ガウス分布モデルを拡張したGMM-UBMや，GMMの平均ベクトルを結合して得られるGMMスーパーベクトルを用いるアプローチ等がある．GMMスーパーベクトルは，後に提案される識別モデルや因子分析モデルにも用いられる考え方．
- 識別モデル
  
  カーネルマシン用いたアプローチで，特徴量空間をより高次元な空間に写像する．代表的なモデルにはSVMや，最尤基準に基づくdPLRM等がある．扱うデータに応じてカーネル関数やそのパラメータを適切に選択しないと性能が出ないため，どのようなカーネル関数や特徴量を用いるかが主な検討事項となる．

  代表的なカーネル関数には，GMMスーパーベクトルカーネルや，GA(Global Alignment)カーネルがある．
- 因子分析モデル
  
  スーパーベクトル空間上で表された発話データについて，話者以外の要因を除去しようとするアプローチ．近年ではこれが主流．スーパーベクトルが，話者を表すベクトルやチャネルを表すベクトル等，複数のベクトルに分解できるという仮定に基づいている．

  Joint Factor Analysis(JFA)で提唱され，JFAを改良(チャネル成分と話者情報を分離しないようにした)i-vectorが代表的．
  PLDAはi-vectorを話者因子とチャネル因子が確立的生成モデルにより得られたと仮定し，因子の分離を試みる手法．

- 最新手法
  
  近年i-vectorによるアプローチに置き換わる形で急速に発展しているのが，深層学習に基づく話者埋め込みの抽出である．深層学習に基づく話者認識では，次のような構造を持つDNN(Deep Newral Network)を用いる．
  1. Encoder: 時間フレーム単位で発話音声の特徴を抽出する
  2. プーリング層: 時間方向に特徴を集約する
  3. 話者認識部: 集約したベクトルから話者を推定
  
  この構造において，話者認識部の中間出力は話者識別に重要な要素が詰まっている，すなわち話者埋め込みに相当すると考えられる．このベクトルをx-vectorという．




- STFTとはなにか
  - 窓長を変えてスペクトログラムの変化(分解能)を確認した
- 話者認識の研究動向
  - 国際動向
  - 法科学
  - 機械学習
  - (ロバストネス)
- 話者認識となりすましと，近年の研究手法
- 話者照合の評価手法についてしらべた
  - EER,DCF,ROC

## 話者照合の実験をした
どのような条件が話者照合の精度にどれほど影響するか調べた
- マスクの有無
  - 実験に使った音声についての説明
  - 結果と考察
- ノイズの有無
  - はじめはホワイトノイズをかけた
  - ノイズの種類と量がどのように影響するか調べた
    - SNR
    - ホワイトノイズ
    - △確率密度関数ノイズ
- デバイスの違い
  - パソコンとスマホ
    - (使う音声をとういつしました)
  - でばいすごとに，ノイズの乗り方が異なっていた(周波数的な意味で)
    - フィルタを適用して，精度のへんかを調査する

# スライド作成分担
- 論文
  - 山口
- 実験
  - マスク
    - (とみなが・ほりえ)
  - ノイズ
    - あべ，まるやま
  - デバイス
    - とみなが・ほりえ


# スライド修正
同じページに結果の図表と考察があるようにする
一枚に収まらないときは，複数ページにわたっても良い(図表と考察が一緒なのは維持)
図表に吹き出しを生やすとかもアリ

